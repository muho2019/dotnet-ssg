@using System.Globalization
@namespace DotnetSsg.Components.Shared

<header class="sticky top-0 z-50 bg-white dark:bg-notion-bg-dark border-b border-notion-gray-light dark:border-notion-gray-dark shadow-sm">
    <div class="max-w-notion mx-auto px-4 py-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between">
            <!-- Logo/Site Title -->
            <div class="flex-shrink-0">
                <a href="@BaseUrl" class="flex items-center space-x-3">
                    <div class="w-10 h-10 rounded-lg bg-gradient-to-br from-notion-blue to-notion-blue/70 flex items-center justify-center">
                        <span class="text-white font-bold text-lg">N</span>
                    </div>
                    <span class="hidden sm:inline text-xl font-semibold text-notion-text dark:text-notion-text-dark">@SiteTitle</span>
                </a>
            </div>
            
            <!-- Navigation -->
            <nav class="hidden md:flex items-center space-x-8">
                <NavLink href="@BaseUrl" Match="NavLinkMatch.All" class="text-notion-text dark:text-notion-text-dark hover:text-notion-blue dark:hover:text-blue-400 font-medium transition-colors">
                    Home
                </NavLink>
                <NavLink href="@(BaseUrl.TrimEnd('/') + "/about")" class="text-notion-text dark:text-notion-text-dark hover:text-notion-blue dark:hover:text-blue-400 font-medium transition-colors">
                    About
                </NavLink>
                <a href="@(BaseUrl.TrimEnd('/') + "/feed.xml")" class="text-notion-text dark:text-notion-text-dark hover:text-notion-blue dark:hover:text-blue-400 font-medium transition-colors" title="RSS Feed">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M5.5 13a3.5 3.5 0 01-.369-6.98 4 4 0 117.753-1 4.5 4.5 0 11-4.384 5.98z"></path>
                    </svg>
                </a>
            </nav>
            
            <!-- Dark Mode Toggle -->
            <div class="flex items-center space-x-4">
                <button 
                    class="inline-flex items-center justify-center w-10 h-10 rounded-lg bg-notion-gray-light dark:bg-notion-gray-dark hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors"
                    @onclick="@ToggleDarkMode"
                    aria-label="Toggle dark mode"
                    title="Dark mode">
                    @if (IsDarkMode)
                    {
                        <svg class="w-5 h-5 text-notion-text dark:text-notion-text-dark" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path>
                        </svg>
                    }
                    else
                    {
                        <svg class="w-5 h-5 text-notion-text dark:text-notion-text-dark" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4.293 1.707a1 1 0 011.414-1.414l.707.707a1 1 0 11-1.414 1.414l-.707-.707zm2 2a1 1 0 011.414 0l.707.707a1 1 0 11-1.414 1.414l-.707-.707zM10 7a3 3 0 110 6 3 3 0 010-6zm-7 8a1 1 0 110-2h1.586a1 1 0 01.707.293l2.414 2.414a1 1 0 11-1.414 1.414l-2.414-2.414A1 1 0 013 15zm9.586 0a1 1 0 01.707.293l2.414 2.414a1 1 0 11-1.414 1.414l-2.414-2.414a1 1 0 01.707-1.293z" clip-rule="evenodd"></path>
                        </svg>
                    }
                </button>
                
                <!-- Mobile menu button -->
                <button class="md:hidden inline-flex items-center justify-center w-10 h-10 rounded-lg bg-notion-gray-light dark:bg-notion-gray-dark hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors" aria-label="Menu">
                    <svg class="w-5 h-5 text-notion-text dark:text-notion-text-dark" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>
</header>

@code {
    [Parameter]
    public string SiteTitle { get; set; } = "My Site";
    
    [Parameter]
    public string BaseUrl { get; set; } = "/";
    
    [Parameter]
    public bool IsDarkMode { get; set; }
    
    [Parameter]
    public EventCallback<bool> OnDarkModeToggle { get; set; }
    
    private async Task ToggleDarkMode()
    {
        IsDarkMode = !IsDarkMode;
        await OnDarkModeToggle.InvokeAsync(IsDarkMode);
    }
}
