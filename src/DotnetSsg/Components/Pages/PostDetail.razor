@using DotnetSsg.Models
@namespace DotnetSsg.Components.Pages

<MainLayout PageTitle="@Post?.Title" SiteTitle="@SiteTitle" Description="@Post?.Description" 
             CanonicalUrl="@(BaseUrl.TrimEnd('/') + Post?.Url)" RssFeedUrl="@RssFeedUrl"
             BaseUrl="@BaseUrl" Language="@Language">
    <div class="max-w-notion mx-auto px-4 py-12 sm:px-6 lg:px-8">
        @if (Post != null)
        {
            <ArticleHeader Content="@Post" BaseUrl="@BaseUrl" />
            
            <!-- Post Content -->
            <article class="prose dark:prose-invert max-w-none">
                @((MarkupString)Post.HtmlContent)
            </article>
            
            <!-- Post Navigation -->
            <nav class="mt-12 pt-8 border-t border-notion-gray-light dark:border-notion-gray-dark">
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0">
                    @if (PreviousPost != null)
                    {
                        <a href="@(BaseUrl.TrimEnd('/') + PreviousPost.Url)" 
                           class="flex items-center space-x-2 text-notion-blue dark:text-blue-400 hover:text-notion-blue/70 dark:hover:text-blue-300 transition-colors group">
                            <svg class="w-5 h-5 group-hover:-translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                            </svg>
                            <div class="flex flex-col">
                                <span class="text-xs text-notion-gray dark:text-gray-400">이전 포스트</span>
                                <span class="font-medium">@PreviousPost.Title</span>
                            </div>
                        </a>
                    }
                    
                    @if (NextPost != null)
                    {
                        <a href="@(BaseUrl.TrimEnd('/') + NextPost.Url)" 
                           class="flex items-center space-x-2 text-notion-blue dark:text-blue-400 hover:text-notion-blue/70 dark:hover:text-blue-300 transition-colors group ml-auto">
                            <div class="flex flex-col text-right">
                                <span class="text-xs text-notion-gray dark:text-gray-400">다음 포스트</span>
                                <span class="font-medium">@NextPost.Title</span>
                            </div>
                            <svg class="w-5 h-5 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                            </svg>
                        </a>
                    }
                </div>
            </nav>
        }
        else
        {
            <div class="text-center py-12">
                <p class="text-notion-gray dark:text-gray-400">포스트를 찾을 수 없습니다.</p>
            </div>
        }
    </div>
</MainLayout>

@code {
    [Parameter]
    public Post? Post { get; set; }
    
    [Parameter]
    public Post? PreviousPost { get; set; }
    
    [Parameter]
    public Post? NextPost { get; set; }
    
    [Parameter]
    public string SiteTitle { get; set; } = "My Site";
    
    [Parameter]
    public string BaseUrl { get; set; } = "/";
    
    [Parameter]
    public string? RssFeedUrl { get; set; }
    
    [Parameter]
    public string Language { get; set; } = "ko";
}
